<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/dagger/blog/rss.xml" title="Dagger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/dagger/blog/atom.xml" title="Dagger Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KDHSNBDXW8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KDHSNBDXW8",{})</script><title data-react-helmet="true">Example Queries | Dagger</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://raystack.github.io//dagger/docs/guides/query_examples"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Example Queries | Dagger"><meta data-react-helmet="true" name="description" content="Dagger uses Apache Calcite as the querying framework. Find the documentation for the same here. Templates of some of the commonly used types of queries are listed down."><meta data-react-helmet="true" property="og:description" content="Dagger uses Apache Calcite as the querying framework. Find the documentation for the same here. Templates of some of the commonly used types of queries are listed down."><link data-react-helmet="true" rel="shortcut icon" href="/dagger/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://raystack.github.io//dagger/docs/guides/query_examples"><link data-react-helmet="true" rel="alternate" href="https://raystack.github.io//dagger/docs/guides/query_examples" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://raystack.github.io//dagger/docs/guides/query_examples" hreflang="x-default"><link rel="stylesheet" href="/dagger/assets/css/styles.618c758c.css">
<link rel="preload" href="/dagger/assets/js/runtime~main.38f5f07c.js" as="script">
<link rel="preload" href="/dagger/assets/js/main.ac84df79.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#222;color:#eee" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">⭐️ If you like Dagger, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/raystack/dagger">GitHub</a>! ⭐</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dagger/"><img src="/dagger/img/logo-n.svg" alt="Dagger" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/dagger/img/logo-n.svg" alt="Dagger" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dagger</b></a><a class="navbar__item navbar__link navbar__link--active" href="/dagger/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/dagger/blog">Blog</a><a class="navbar__item navbar__link" href="/dagger/help">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://bit.ly/2RzPbtn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link"></a><a href="https://github.com/raystack/dagger" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-github"></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">☾</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">☀️</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dagger/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dagger/docs/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/overview">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/quickstart">Dagger Quickstart</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/choose_source">Choosing a Source</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/create_dagger">Create a job</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dagger/docs/guides/query_examples">Example Queries</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/use_transformer">Use Transformer</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/use_udf">Use UDF</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dagger/docs/guides/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advance</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Usecases</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Examples</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contribute</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Example Queries</h1></header><p>Dagger uses Apache Calcite as the querying framework. Find the documentation for the same <a href="https://calcite.apache.org/docs/reference.html" target="_blank" rel="noopener noreferrer">here</a>. Templates of some of the commonly used types of queries are listed down.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="sample-input-schema"></a>Sample input schema<a class="hash-link" href="#sample-input-schema" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="sample-booking-event-schema"></a>Sample booking event schema<a class="hash-link" href="#sample-booking-event-schema" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI protobuf"><pre tabindex="0" class="prism-code language-protobuf codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">message SampleBookingInfo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string order_number = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string order_url = 2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string status = 3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Timestamp event_timestamp = 4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string customer_id = 5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string driver_id = 6;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string service_type = 7;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string service_area_id = 8;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated Item items = 9;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  map&lt;string, string&gt; metadata = 10;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI protobuf"><pre tabindex="0" class="prism-code language-protobuf codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">message Item {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string id = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 quantity = 2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="sample-payment-event-schema"></a>Sample payment event schema<a class="hash-link" href="#sample-payment-event-schema" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI protobuf"><pre tabindex="0" class="prism-code language-protobuf codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">message SamplePaymentInfo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string order_id = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  string customer_id = 2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Timestamp event_timestamp = 3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 order_amount = 4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="influx-sink"></a>Influx Sink<a class="hash-link" href="#influx-sink" title="Direct link to heading">#</a></h2><ul><li>While using Dagger with InfluxDB sink, <code>tag_</code> should be appended to the beginning of those columns which you want as dimensions. Dimensions will help you slice the data in InfluxDB-Grafana. InfluxDB tags are essentially the columns on which data is indexed. Find more on influxDB tags <a href="https://docs.influxdata.com/influxdb/v1.8/concepts/glossary/#tag" target="_blank" rel="noopener noreferrer">here</a>.</li><li>DO NOT use <code>tag_</code> for high cardinal data points such as customer_id, merchant_id etc unless you provide a filtering condition; this will create tag explosion &amp; affect the InfluxDB.</li><li>Ensure there is at least one value field present in the query(not starting with <code>tag_</code>).</li><li>In case you want your dimensions without the prefix <code>tag_</code> you can use <code>label_</code> prefix. The name of the dimension will not have <code>tag_</code> or <code>label_</code> prefix.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query"></a>Example query<a class="hash-link" href="#example-query" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> service_type as tag_service_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> status</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="kafka-sink"></a>Kafka Sink<a class="hash-link" href="#kafka-sink" title="Direct link to heading">#</a></h2><ul><li><code>Tag_</code> prefix should not be used before the dimensions.</li><li>Ensure that sink type is selected as Kafka.</li><li>Dimensions &amp; metrics from the SELECT section in the query should be mapped exactly to the field names in the output proto.</li><li>Data types of the selected fields should exactly match to the output proto fields.</li><li>Unlike Influx sink Dagger, high cardinality should not be an issue in Kafka sink.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-1"></a>Example query<a class="hash-link" href="#example-query-1" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> status</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="bigquery-sink"></a>BigQuery Sink<a class="hash-link" href="#bigquery-sink" title="Direct link to heading">#</a></h2><ul><li><code>Tag_</code> prefix should not be used before the dimensions.</li><li>Ensure that sink type is selected as bigquery.</li><li>Dimensions &amp; metrics from the SELECT section in the query should be mapped exactly to the field names in the output protobuf type configured for bigquery sink</li><li>Data types of the selected fields should exactly match to the output protobuf type configured for bigquery sink</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-2"></a>Example query<a class="hash-link" href="#example-query-2" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> status</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="aggregation---tumble-window"></a>Aggregation - Tumble window<a class="hash-link" href="#aggregation---tumble-window" title="Direct link to heading">#</a></h2><ul><li>Use this for aggregating data points using a TUMBLE window function (data aggregated for all points in the window at the end of each cycle).</li><li>Use the windowing function for Tumble window using the keyword TUMBLE_END(datetime, INTERVAL &#x27;duration&#x27; unit) &amp; TUMBLE (datetime, INTERVAL &#x27;duration&#x27; unit ) in SELECT &amp; GROUP BY section respectively (duration is a number &amp; unit can be SECOND/MINUTE/HOUR).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-3"></a>Example query<a class="hash-link" href="#example-query-3" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  count(1) as booking_count,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE_END(rowtime, INTERVAL &#x27;60&#x27; SECOND) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE (rowtime, INTERVAL &#x27;60&#x27; SECOND)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="aggregation---hop-window"></a>Aggregation - Hop window<a class="hash-link" href="#aggregation---hop-window" title="Direct link to heading">#</a></h2><ul><li>Use this for aggregating data points using a HOP window function (data aggregated at every slide internal for all points in the window interval).</li><li>Use the windowing function for Hop window using the keyword HOP_END(datetime, SLIDE_INTERVAL &#x27;duration&#x27; unit, WINDOW_INTERVAL &#x27;duration&#x27; unit) &amp; HOP (datetime, SLIDE_INTERVAL &#x27;duration&#x27; unit, WINDOW_INTERVAL &#x27;duration&#x27; unit) in SELECT &amp; GROUP BY section respectively (both slide interval &amp; window interval are numbers &amp; units can be SECOND/MINUTE/HOUR).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-4"></a>Example query<a class="hash-link" href="#example-query-4" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  service_area_id AS tag_service_area_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  count(1) AS number_of_bookings,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOP_END(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rowtime,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTERVAL &#x27;60&#x27; SECOND,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTERVAL &#x27;1&#x27; HOUR</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOP(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rowtime,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTERVAL &#x27;60&#x27; SECOND,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTERVAL &#x27;1&#x27; HOUR</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  service_area_id</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="subqueryinner-query"></a>Subquery/Inner Query<a class="hash-link" href="#subqueryinner-query" title="Direct link to heading">#</a></h2><ul><li>You can use as many inner queries as required.</li><li>In case you want to use window aggregations both in inner and outer query, use <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.9/dev/table/sql.html#time-attributes" target="_blank" rel="noopener noreferrer">TUMBLE_ROWTIME</a> to get the output rowtimes from the inner window.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-5"></a>Example query<a class="hash-link" href="#example-query-5" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  booking_count,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  cancelled_order,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      count(1) as booking_count,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cast(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Sum(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Case</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              When status in (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;CUSTOMER_CANCELLED&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              ) Then 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              Else 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            End</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ) as float</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) as cancelled_order,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      TUMBLE_END(rowtime, INTERVAL &#x27;60&#x27; SECOND) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      TUMBLE (rowtime, INTERVAL &#x27;60&#x27; SECOND)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="feast-row-transformation"></a>Feast Row Transformation<a class="hash-link" href="#feast-row-transformation" title="Direct link to heading">#</a></h2><p>This sample query is for transforming data to Feature rows for <a href="https://github.com/feast-dev/feast/tree/master/docs#introduction" target="_blank" rel="noopener noreferrer">Feast</a> using <a href="/dagger/docs/reference/udfs#Features">Features UDF</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-6"></a>Example query<a class="hash-link" href="#example-query-6" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;MINUTE&#x27; AS granularity,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  customer_id AS entityKey,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;customers&#x27; AS entityName,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Features(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOWER(service_type),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ) AS features,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE_END(rowtime, INTERVAL &#x27;1&#x27; MINUTE) AS eventTimestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE (rowtime, INTERVAL &#x27;1&#x27; MINUTE),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  customer_id</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="inner-join"></a>Inner Join<a class="hash-link" href="#inner-join" title="Direct link to heading">#</a></h2><ul><li>In order to keep state size in check, we recommend using time interval joins.</li><li>Time interval should be in the format table2.rowtime BETWEEN table1.rowtime - INTERVAL &#x27;first duration&#x27; unit AND table1.rowtime + INTERVAL &#x27;second duration&#x27; unit (both durations are numbers &amp; units can be SECOND/MINUTE/HOUR)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-queryno-with"></a>Example query(no with)<a class="hash-link" href="#example-queryno-with" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a> and payment denotes payment stream with <a href="#sample-payment-event-schema">sample payment schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  booking.service_type as tag_service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  count(order_number) as number_of_orders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sum(order_amount) as total_amount,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE_END(booking.rowtime, INTERVAL &#x27;60&#x27; MINUTE) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  join `payment` ON booking.order_number = payment.order_id</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND payment.rowtime BETWEEN booking.rowtime</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND booking.rowtime + INTERVAL &#x27;5&#x27; MINUTE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE (booking.rowtime, INTERVAL &#x27;60&#x27; MINUTE),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  booking.service_type</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-queryusing-with"></a>Example query(using with)<a class="hash-link" href="#example-queryusing-with" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a> and payment denotes payment stream with <a href="#sample-payment-event-schema">sample payment schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">WITH booking_info AS (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rowtime</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">payment_info AS (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_amount</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rowtime</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    `payment`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  booking_info.service_type as tag_service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  count(booking_info.order_number) as number_of_orders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sum(payment_info.order_amount) as total_amount,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE_END(booking_info.rowtime, INTERVAL &#x27;60&#x27; MINUTE) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  `booking_info`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  join `payment_info` ON booking_info.order_number = payment_info.order_id</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND payment_info.rowtime BETWEEN booking_info.rowtime</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND booking_info.rowtime + INTERVAL &#x27;5&#x27; MINUTE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TUMBLE (booking_info.rowtime, INTERVAL &#x27;60&#x27; MINUTE),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  booking_info.service_type</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="union"></a>Union<a class="hash-link" href="#union" title="Direct link to heading">#</a></h2><p>In union, the fields selected from 2 streams can be combined to create a new stream. Ensure that the same field names are present on both the stream select outputs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-query-7"></a>Example query<a class="hash-link" href="#example-query-7" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a> and payment denotes payment stream with <a href="#sample-payment-event-schema">sample payment schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  customer_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  service_area_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  event_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM `booking`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">UNION ALL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  (SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;&#x27; AS service_type,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_id AS order_number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;&#x27; AS service_area_id,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  FROM `payment`)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="unnest"></a>Unnest<a class="hash-link" href="#unnest" title="Direct link to heading">#</a></h2><ul><li>Use Unnest to flatten arrays present in the schema</li><li>In the FROM section, use the Unnest function after the table name in the following syntax FROM booking, UNNEST(booking.items) AS items (id, quantity, name)</li><li>All fields from the array object should be added while unnesting</li></ul><p>In the above example, to retrieve the unnested fields, use items.name, items.quantity etc.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-querylist"></a>Example query(list)<a class="hash-link" href="#example-querylist" title="Direct link to heading">#</a></h3><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  tag_itemname,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  num_orders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      items.name as tag_itemname,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      count(1) as num_orders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      TUMBLE_END(rowtime, INTERVAL &#x27;5&#x27; MINUTE) AS window_timestamp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      booking,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      UNNEST(booking.items) AS items (id, quantity, name)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GROUP BY</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      TUMBLE (rowtime, INTERVAL &#x27;5&#x27; MINUTE),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      items.name</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  num_orders &gt; 100</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="example-querymap"></a>Example query(map)<a class="hash-link" href="#example-querymap" title="Direct link to heading">#</a></h3><p>In Dagger, we deserialize maps also as list so unnest works in the following way.</p><p>Here booking denotes the booking events stream with <a href="#sample-booking-event-schema">sample booking schema</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI SQL"><pre tabindex="0" class="prism-code language-SQL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  index_map.`key` AS data_in_key,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  index_map.`value` AS data_in_value,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM booking, UNNEST(booking.metadata) AS index_map (`key`, `value`)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/raystack/dagger/edit/master/docs/docs/guides/query_examples.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dagger/docs/guides/create_dagger"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Create a job</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dagger/docs/guides/use_transformer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use Transformer »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sample-input-schema" class="table-of-contents__link">Sample input schema</a><ul><li><a href="#sample-booking-event-schema" class="table-of-contents__link">Sample booking event schema</a></li><li><a href="#sample-payment-event-schema" class="table-of-contents__link">Sample payment event schema</a></li></ul></li><li><a href="#influx-sink" class="table-of-contents__link">Influx Sink</a><ul><li><a href="#example-query" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#kafka-sink" class="table-of-contents__link">Kafka Sink</a><ul><li><a href="#example-query-1" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#bigquery-sink" class="table-of-contents__link">BigQuery Sink</a><ul><li><a href="#example-query-2" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#aggregation---tumble-window" class="table-of-contents__link">Aggregation - Tumble window</a><ul><li><a href="#example-query-3" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#aggregation---hop-window" class="table-of-contents__link">Aggregation - Hop window</a><ul><li><a href="#example-query-4" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#subqueryinner-query" class="table-of-contents__link">Subquery/Inner Query</a><ul><li><a href="#example-query-5" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#feast-row-transformation" class="table-of-contents__link">Feast Row Transformation</a><ul><li><a href="#example-query-6" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#inner-join" class="table-of-contents__link">Inner Join</a><ul><li><a href="#example-queryno-with" class="table-of-contents__link">Example query(no with)</a></li><li><a href="#example-queryusing-with" class="table-of-contents__link">Example query(using with)</a></li></ul></li><li><a href="#union" class="table-of-contents__link">Union</a><ul><li><a href="#example-query-7" class="table-of-contents__link">Example query</a></li></ul></li><li><a href="#unnest" class="table-of-contents__link">Unnest</a><ul><li><a href="#example-querylist" class="table-of-contents__link">Example query(list)</a></li><li><a href="#example-querymap" class="table-of-contents__link">Example query(map)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Products</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/raystack/optimus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Optimus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/raystack/firehose" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Firehose<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/raystack/raccoon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Raccoon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/raystack/stencil" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stencil<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dagger/docs/intro">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/dagger/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/dagger/help">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://bit.ly/2RzPbtn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/raystack/dagger" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/dagger/assets/js/runtime~main.38f5f07c.js"></script>
<script src="/dagger/assets/js/main.ac84df79.js"></script>
</body>
</html>